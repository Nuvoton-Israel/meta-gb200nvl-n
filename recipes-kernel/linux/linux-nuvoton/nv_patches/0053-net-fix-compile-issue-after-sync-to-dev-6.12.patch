From cef2e75ebf4b7e1722bea5f0967f2b9fab42e05c Mon Sep 17 00:00:00 2001
From: Marvin Lin <milkfafa@gmail.com>
Date: Thu, 8 Jan 2026 13:15:55 +0800
Subject: [PATCH] net: fix compile issue after sync to dev-6.12

Remove duplicated function "rtl8211f_rtlgen_read_status" in realtek.c.
Signed-off-by: Leo Huang <leohu@nvidia.com>
Fixes JIRA https://jirasw.nvidia.com/browse/DGXOPENBMC-16046
Upstream-Status: Pending [Not submitted to upstream yet]
---
 drivers/net/phy/realtek.c | 41 +--------------------------------------
 1 file changed, 1 insertion(+), 40 deletions(-)

diff --git a/drivers/net/phy/realtek.c b/drivers/net/phy/realtek.c
index 0b846a75b0bf..e1893116dfa5 100644
--- a/drivers/net/phy/realtek.c
+++ b/drivers/net/phy/realtek.c
@@ -520,45 +520,6 @@ static int rtl8211f_config_init(struct phy_device *phydev)
 	return 0;
 }
 
-
-static int rtl8211f_rtlgen_read_status(struct phy_device *phydev)
-{
-	int ret;
-
-	/* RTL8211F SGMII to RGMII MODE verification - NVIDIA BMC */
-	ret = phy_read_paged(phydev, 0xd40, 0x10);
-	if(ret < 0) {
-		dev_err(&phydev->mdio.dev, "Failed to read Mode Selection\n");
-		return ret;
-	}
-
-	ret = ret & RTL8211F_MODE_SEL;
-
-	if (ret == RTL8211F_SGMII_RGMII_PM || ret == RTL8211F_SGMII_RGMII_MP) {
-
-		/* Check Link status */
-		ret = phy_read_paged(phydev, 0xdcf, 0x15);
-		if (ret < 0) {
-			dev_err(&phydev->mdio.dev,"failed to read  link status \n");
-			return ret;
-		}
-		/* Link is Up */
-		if (ret &  BIT(4)) {
-			phydev->link = 1;
-			phydev->speed = 1000;
-			phydev->duplex=DUPLEX_FULL;
-		}
-	} else {
-		ret = genphy_read_status(phydev);
-		if (ret < 0)
-			return ret;
-
-		return rtlgen_get_speed(phydev);
-	}
-
-	return 0;
-}
-
 static int rtl821x_suspend(struct phy_device *phydev)
 {
 	struct rtl821x_priv *priv = phydev->priv;
@@ -1444,7 +1405,7 @@ static struct phy_driver realtek_drvs[] = {
 		.name		= "RTL8211F Gigabit Ethernet",
 		.probe		= rtl821x_probe,
 		.config_init	= &rtl8211f_config_init,
-		.read_status	= rtl8211f_rtlgen_read_status,
+		.read_status	= rtlgen_read_status,
 		.config_intr	= &rtl8211f_config_intr,
 		.handle_interrupt = rtl8211f_handle_interrupt,
 		.suspend	= rtl821x_suspend,
-- 
2.34.1

